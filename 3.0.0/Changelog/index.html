<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Factorial GmbH, Hamburg">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Changelog - Phabalicious</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../css/version-select.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Changelog";
    var mkdocs_page_input_path = "Changelog.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Phabalicious</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">How does phabalicious work in two sentences</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../installation/">Installation of needed dependencies</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../usage/">Running phabalicious</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../available-tasks/">Available tasks</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../configuration/">Structure of the configuration file</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../docker-integration/">Docker integration</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../local-overrides/">Local overrides</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../scripts/">Scripts</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../app-scaffold/">Scaffolding a new app</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../app-create-destroy/">Creating/ destroying an app from existing configuration</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../passwords/">Passwords</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../contribute/">Contributing to Phabalicious</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Changelog</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#changelog">Changelog</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#300-2019-02-14">3.0.0 / 2019-02-14</a></li>
        
            <li><a class="toctree-l3" href="#300-beta6-2019-02-08">3.0.0-beta.6 / 2019-02-08</a></li>
        
            <li><a class="toctree-l3" href="#300-beta5-2019-02-05">3.0.0-beta.5 / 2019-02-05</a></li>
        
            <li><a class="toctree-l3" href="#300-beta4-2019-01-28">3.0.0-beta.4 / 2019-01-28</a></li>
        
            <li><a class="toctree-l3" href="#300-beta3-2019-01-26">3.0.0-beta.3 / 2019-01-26</a></li>
        
            <li><a class="toctree-l3" href="#300-beta2-2019-01-19">3.0.0-beta.2 / 2019-01-19</a></li>
        
            <li><a class="toctree-l3" href="#300-beta1-2019-01-10">3.0.0-beta.1 / 2019-01-10</a></li>
        
            <li><a class="toctree-l3" href="#300-alpha8-2018-12-20">3.0.0-alpha.8 / 2018-12-20</a></li>
        
            <li><a class="toctree-l3" href="#300-alpha7-2018-12-14">3.0.0-alpha.7 / 2018-12-14</a></li>
        
            <li><a class="toctree-l3" href="#300-alpha6-2018-12-11">3.0.0-alpha.6 / 2018-12-11</a></li>
        
            <li><a class="toctree-l3" href="#300-alpha5-2018-12-08">3.0.0-alpha.5 / 2018-12-08</a></li>
        
            <li><a class="toctree-l3" href="#300-alpha4-2018-12-08">3.0.0-alpha.4 / 2018-12-08</a></li>
        
            <li><a class="toctree-l3" href="#300-develop">3.0.0 develop</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Phabalicious</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Changelog</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/factorial-io/phabalicious/edit/develop/docs/docs/Changelog.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="changelog">Changelog</h1>
<h2 id="300-2019-02-14">3.0.0 / 2019-02-14</h2>
<h3 id="fixed">Fixed</h3>
<ul>
<li>Increase timeout for non-interactive processes.</li>
<li><code>restore:sql-from-file</code>: Run a preparation method so tunnels are in place before running the actual scp</li>
<li><code>copy-from files</code>: Fix for "too many arguments" error message of rsync</li>
</ul>
<h2 id="300-beta6-2019-02-08">3.0.0-beta.6 / 2019-02-08</h2>
<h3 id="fixed_1">Fixed</h3>
<ul>
<li>.netrc is optional, show a warning if not found, instead of breaking the flow (Fixes #27)</li>
</ul>
<h2 id="300-beta5-2019-02-05">3.0.0-beta.5 / 2019-02-05</h2>
<h3 id="fixed_2">Fixed</h3>
<ul>
<li>fixes a bug resolving remote assets for app:scaffold</li>
</ul>
<h2 id="300-beta4-2019-01-28">3.0.0-beta.4 / 2019-01-28</h2>
<h3 id="fixed_3">Fixed</h3>
<ul>
<li>Exit early after app-update to prevent php exception because of missing files. (Fixes #24)</li>
<li>Make update-check more robust</li>
</ul>
<h2 id="300-beta3-2019-01-26">3.0.0-beta.3 / 2019-01-26</h2>
<h3 id="new">New</h3>
<ul>
<li>Add transform to questions, update documentation, fix tests</li>
<li>Refactor questions in <code>app:scaffold</code> questions are now part of the scaffold.yml</li>
<li>Add support for copying a .netrc file to the docker container</li>
<li>New command <code>jira</code>which will show all open tickets for the given project and user. (#22)</li>
</ul>
<h2 id="300-beta2-2019-01-19">3.0.0-beta.2 / 2019-01-19</h2>
<h3 id="new_1">New</h3>
<ul>
<li>Add support for .fabfile.local.yaml in user-folder</li>
<li>Show a message when a new version of phabalicious is available.</li>
</ul>
<h3 id="fixed_4">Fixed</h3>
<ul>
<li>Documentation for the new jira-command (#22)</li>
<li>Remove trailing semicolon (Fixes #23)</li>
<li>Report a proper error message when handling modules_enabled.txt or modules_disabled.txt is failing</li>
<li>Fix shell-completion</li>
</ul>
<h2 id="300-beta1-2019-01-10">3.0.0-beta.1 / 2019-01-10</h2>
<h3 id="fixed_5">fixed</h3>
<ul>
<li>Fix logic error in InstallCommand, add testcases (Fixes #21)</li>
<li>Wrap interactive shell with bash only if we have a command to execute</li>
<li>Try up to 5 parent folders to find suitable fabfiles (Fixes #18)</li>
<li>Use paralell uploads for ftp-deployments</li>
<li>Use a login-shell when running drush or drupalconsole interactively. (Fixes #20)</li>
<li>Add autocompletion for <code>install-from</code></li>
</ul>
<h2 id="300-alpha8-2018-12-20">3.0.0-alpha.8 / 2018-12-20</h2>
<h3 id="fixed_6">fixed</h3>
<ul>
<li>Call overridden methods only one time, add missin reset-implementation to platform-method (fixes #14)</li>
<li>Increase verbosity of app:scaffold</li>
<li>Add missing twig-dependency to phar-creation (fixes #17)</li>
<li>Fix handling of relative paths in app:scaffold (Fixes #16)</li>
<li>Fix parsing of multiple IPs from a docker-container (Fixes #15)</li>
<li>Pass available arguments to autocompletion for command copy-from (Fixes #13)</li>
<li>Run drupalconsole in an interactive shell</li>
</ul>
<h2 id="300-alpha7-2018-12-14">3.0.0-alpha.7 / 2018-12-14</h2>
<h3 id="fixed_7">fixed</h3>
<ul>
<li>Handle app-options correctly when doing shell-autocompletion (Fixes #12)</li>
<li>Silent warnings when doing autocompletion (fixes #11)</li>
<li>Better command output for start-remote-access (fixes #10)</li>
<li>Throw exception if docker task fails</li>
<li>Fix command output parsing</li>
<li>Source /etc/profile and .bashrc</li>
<li>Better defaults for lftp</li>
</ul>
<h2 id="300-alpha6-2018-12-11">3.0.0-alpha.6 / 2018-12-11</h2>
<h3 id="fixed_8">fixed</h3>
<ul>
<li>Some bugfixes for ftp-deployments</li>
<li>Nicer output</li>
<li>Add docs for shell-autcompletion</li>
<li>Fix fish autocompletion (sort of)</li>
<li>Set version number, when not bundling as phar</li>
</ul>
<h2 id="300-alpha5-2018-12-08">3.0.0-alpha.5 / 2018-12-08</h2>
<h3 id="fixed_9">fixed</h3>
<ul>
<li>Use real version number</li>
<li>Fix phar-build</li>
</ul>
<h2 id="300-alpha4-2018-12-08">3.0.0-alpha.4 / 2018-12-08</h2>
<h3 id="new_2">new</h3>
<ul>
<li>New command <code>self-update</code>, will download and install the latest available version</li>
<li>New method <code>ftp-sync</code> to deploy code-bases to a remote ftp-instance</li>
<li>Introduction of a password-manager for retrieving passwords from the user or a special file</li>
</ul>
<h3 id="changed">changed</h3>
<ul>
<li>Switch to box for building phars</li>
</ul>
<h3 id="fixed_10">fixed</h3>
<ul>
<li>Do not run empty script lines (Fixes #8)</li>
<li>Set folder for script-phase</li>
<li>Set rootFolder fot task-specific scripts</li>
<li>Support legacy host-types</li>
</ul>
<h2 id="300-develop">3.0.0 develop</h2>
<p>Fabalicious is now rewritten in PHP, so we changed the name to make the separation more clear. Phabalicious is now a symfony console app and uses a more unix-style approach to arguments and options. E.g. instead of <code>config:&lt;name-of-config&gt;</code> use <code>--config=&lt;name-of-config&gt;</code></p>
<h3 id="why-the-rewrite">Why the rewrite</h3>
<p>Python on Mac OS X is hard, multiple versions, multiple locations etc. Every machine needed some magic hands to get fabalicious working on it. Fabalicious itself is written in python 2.x, but the world is moving on to python 3. Fabric, the underlying lib we used for fabalicious is also moving forward to version 2 which is not backwards compatible yet with fabric 1. On the other side we are now maintaining more and more containerized setups where you do not need ssh to run commands in. A popular example is docker and its whole universe. Fabric couldn't help us here, and fabric is moving into a different direction.</p>
<p>And as a specialized Drupal boutique we write PHP all day long. To make it easier for our team to improve the toolset by ourselves and get help from the rest of the community, using PHP/ Symfony as a base for the rewrite was a no-brainer.</p>
<p>Why not use existing tools, like <a href="https://robo.li/">robo</a>, <a href="https://deployer.org/">deployer</a> or other tools? These tools are valuable instruments in our tool-belt, but none of them fit our requirements completely. We see phabalicious as a meta-tool integrating with all of them in nice and easy way. We need a lot of flexibility as we need to support a lot of different tech- and hosting-stacks, so we decided to port fabalicious to phabalicious.</p>
<p>There's a lot of change going on here, but the structure of the fabfile.yaml is still the same.</p>
<h3 id="changed-command-line-options-and-arguments">Changed command line options and arguments</h3>
<p>As fabric (the underlying lib we used for fabalicious) is quite different to symfony console apps there are more subtle changes. For example you can invoke only one task per run. With fabalicious it was easy to run multiple commands:</p>
<pre><code class="shell">fab config:mbb docker:run reset ssh
</code></pre>

<p>This is not possible anymore with phabalicious, you need to run the commands in sequence. If you need that on a regular basis, a <code>script</code> might be a good workaround.</p>
<p>Most notably the handling of arguments and options has changed a lot. Fabric gave us a lot of flexibility here, symfony is more strict, but has on the other side some advantages for example self-documenting all possible arguments and options for a given task.</p>
<h4 id="some-examples">Some examples</h4>
<table>
<thead>
<tr>
<th>Old syntax</th>
<th>New syntax</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fab config:mbb about</code></td>
<td><code>phab about --config mbb</code></td>
</tr>
<tr>
<td><code>fab config:mbb about</code></td>
<td><code>phab --config=mbb about</code></td>
</tr>
<tr>
<td><code>fab config:mbb blueprint:de deploy</code></td>
<td><code>phab deploy --config mbb --blueprint de</code></td>
</tr>
<tr>
<td><code>fab config:mbb blueprint:de deploy</code></td>
<td><code>phab --config=mbb --blueprint=de mbb</code></td>
</tr>
</tbody>
</table>
<h3 id="new-features">New features</h3>
<ul>
<li>
<p>Introduction of ShellProviders, they will provide a shell, to run scripts into. Currently implemented are</p>
<ul>
<li><code>local</code>, run the shell-commands on your local host</li>
<li><code>ssh</code>, runs the shell-commands on a remote host.</li>
</ul>
<p>Every shell-provider can have different required options. Currently add the needed shell-provider to your list of needs, e.g.</p>
<pre><code>  needs:
    - local
    - git
    - drush
</code></pre>
</li>
<li>
<p>new global settings <code>disableScripts</code> which will not add the <code>script</code>-method to the needs.</p>
</li>
<li>there's a new command to list all blueprints: <code>list:blueprints</code></li>
<li>new shell-provider <code>dockerExec</code> which will start a shell with the help of <code>docker exec</code> instead of ssh.</li>
<li>
<p>new config-option <code>shellProvider</code>, where you can override the shell-provider to your liking.</p>
<pre><code>hosts:
  mbb:
    shellProvider: docker-exec
</code></pre>
<ul>
<li>You can get help for a specific task via <code>phab help &lt;task&gt;</code>. It will show all possible options and some help.</li>
<li>
<p>docker-compose version 23 changes the schema how names of docker-containers are constructed. To support this change we can now declare the needed service to compute the correct container-name from.</p>
<p>hosts:
  testHost:
    docker:
      service: web
   The <code>name</code> will be discarded, if a <code>service</code>-entry is set.</p>
</li>
</ul>
</li>
<li>
<p>new method <code>ftp-sync</code>, it's a bit special. This method creates the app into a temporary folder, and syncs it via <code>lftp</code> to a remote instance. Here's a complete example (most of them are provided via sensible defaults):</p>
<pre><code>excludeFiles:
  ftp-sync:
    - .git/
    - node_modules
hosts:
  ftpSyncSample:
    needs:
      - git
      - ftp-sync
      - local
    ftp:
      user: &lt;ftp-user&gt;
      password: &lt;ftp-password&gt; #
      host: &lt;ftp-host&gt;
      port: 21
      lftpOptions:
        - --ignoreTime
        - --verbose=3
        - --no-perms
</code></pre>
<p>You can add your password to the file <code>.phabalicious-credentials</code> (see passwords.md) so phabalicious pick it up.</p>
</li>
</ul>
<h3 id="changed_1">Changed</h3>
<ul>
<li><code>docker:startRemoteAccess</code> is now the task <code>start-remote-access</code> as it makes more sense.</li>
<li>the <code>list</code>-task needed to be renamed to <code>list:hosts</code>.</li>
<li>the <code>--list</code> task (which was built into fabric) is now <code>list</code>.</li>
<li>
<p>the <code>offline</code>-task got removed, instead add the <code>-offline</code>-option and set it to 1, e.g.</p>
<p>phab --offline=1 --config=mbb about</p>
</li>
<li>
<p>the task <code>logLevel</code> is replaced by the builtin <code>-v</code>-option</p>
</li>
<li>
<p>autocompletion works now differently than before, but now bash and zsh are supported. Please have a look into the documentation how to install it.</p>
</li>
<li>
<p>for fish-shells</p>
<pre><code>phab _completion --generate-hook --shell-type fish | source
</code></pre>
</li>
<li>
<p>for zsh/bash-shells</p>
<pre><code>source &lt;(phab _completion --generate-hook)
</code></pre>
</li>
<li>
<p><code>listBackups</code> got renamed to <code>list:backups</code></p>
</li>
<li><code>backupDB</code> and <code>backupFiles</code> got removed, use <code>phab backup files</code> or <code>phab backup db</code>, the same mechanism works for restoring a backup.</li>
<li><code>getFile</code> got renamed to <code>get:file</code></li>
<li><code>putFile</code> got renamed to <code>put:file</code></li>
<li><code>getBackup</code> got renamed to <code>get:backup</code></li>
<li><code>getFilesDump</code> got renamed to <code>get:files-backup</code></li>
<li><code>getProperty</code> got renamed to <code>get:property</code></li>
<li><code>getSQLDump</code> got renamed to <code>get:sql-dump</code></li>
<li><code>restoreSQLFromFile</code> got renamed to <code>restore:sql-from-file</code></li>
<li><code>copyDBFrom</code> got renamed to <code>copy-from &lt;config&gt; db</code></li>
<li><code>copyFilesFrom</code> got renamed to <code>copy-from &lt;config&gt; files</code></li>
<li><code>installFrom</code> got renamed to <code>install:from</code></li>
</ul>
<h3 id="deprecated">Deprecated</h3>
<ul>
<li>script-function <code>fail_on_error</code> is deprecated, use <code>breakOnFirstError(&lt;bool&gt;)</code></li>
<li><code>runLocally</code> is deprecated, add a new need <code>local</code> to the lists of needs.</li>
<li><code>strictHostKeyChecking</code> is deprecated, use <code>disableKnownHosts</code> instead.</li>
<li><code>getProperty</code> is deprecated and got renamed to <code>get-property</code></li>
<li><code>ssh</code> is deprecated and got renamed to <code>shell</code> as some implementations might not use ssh.</li>
<li><code>sshCommand</code> is deprecated and got renamed to <code>shell:command</code> and will return the command to run a shell with the given configuration</li>
<li>the needs <code>drush7</code>, <code>drush8</code> and <code>drush9</code> are deprecated, use the need <code>drush</code> and the newly introduced options <code>drupalVersion</code> and <code>drushVersion</code> instead,</li>
<li>the <code>slack</code>-configuration got removed and got replaced by a general notification solution, currently only with a mattermost implementation.</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../contribute/" class="btn btn-neutral" title="Contributing to Phabalicious"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Â© 2018 Factorial GmbH, Hamburg</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/factorial-io/phabalicious/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../contribute/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../js/version-select.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
